<body>


<app-dialog [(visible)]="showDialog">
  <h2 class="ui align-middle header">Check Password</h2>
  <div class="ui left icon input">
    <i class="lock icon"></i>
    <input type="password" name="passwordConfirm" placeholder="Password"
           [(ngModel)]="currPassword">
  </div>
  <button (click)="checkCurrentPassword()" class="ui right submit button">Check
  </button>
  <button (click)="goBack()" class="ui right submit button">Go Back
  </button>
</app-dialog>

<div *ngIf="currentUser">
    <div class="ui main text container">
      <div class="column">
        <h2 class="ui align-middle header">
          {{currentUser.username}}
          <button class="ui button right floated" (click)="goBack()">Back</button>
        </h2>
      </div>
    </div>

    <div class="ui main text container">
      <form class="ui large form"
            [formGroup]="passwordForm"
            [class.error]="!passwordForm.valid&&passwordForm.touched"
            (submit)="changePassword()">
        <div class="field">
          <label>Email</label>
          {{currentUser.email}}
        </div>

        <!-- Password Input -->
        <div class="required field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="password" placeholder="Password"
                   [formControl]="passwordForm.controls['password']">
          </div>
        </div>
        <div *ngIf="password.hasError('invalidPassword')&&password.touched"
             class="ui error message"> Must contain at least 8 characters with at least one number
        </div>

        <!-- PasswordConfirm Input -->
        <div class="required field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="passwordConfirm" placeholder="Password Confirmation"
                   [formControl]="passwordForm.controls['passwordConfirm']">
          </div>
        </div>
        <div *ngIf="passwordConfirm.hasError('invalidPasswordConfirm')&&passwordConfirm.touched"
             class="ui error message"> Must match password.
        </div>
        <button class="ui fluid submit button"
                type="submit"
                [disabled]="!passwordForm.valid">Change Password
        </button>

      </form>
    </div>
  </div>
</body>
