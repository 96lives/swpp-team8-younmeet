<body>
<app-dialog [(visible)]="showDialog">
  <img src="../../../assets/images/check_password_orange.png" width="270" height="40">

  <div class="ui left icon input fluid">
    <i class="lock icon"></i>
    <input type="password" name="passwordConfirm" placeholder="Password"
           [(ngModel)]="currPassword">
  </div>
  <br>
  <button (click)="checkCurrentPassword()" class="ui right floated submit teal button">Check
  </button>
  <button (click)="goBack()" class="ui right floated submit yellow button">Back
  </button>

</app-dialog>

<div *ngIf="currentUser">
    <div class="ui main text container">
      <div class="column">
        <h2 id="username" class="ui align-middle header">
          {{currentUser.username}}
        </h2>
      </div>
      <button class="ui yellow button right floated" (click)="goBack()">Back</button>

    </div>

    <div class="ui main text container">
      <form class="ui large form"
            [formGroup]="passwordForm"
            [class.error]="!passwordForm.valid&&passwordForm.touched"
            (submit)="changePassword()">
        <div class="field">
          <label>Email</label>
          {{currentUser.email}}
        </div>

        <div class="ui hidden divider"></div>
        <div class="field">
          <label>Change Password</label>
        </div>
        <!-- Password Input -->
        <div class="required field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="password" placeholder="Password"
                   [formControl]="passwordForm.controls['password']">
          </div>
        </div>
        <div *ngIf="password.hasError('invalidPassword')&&password.touched"
             class="ui error message"> Must contain at least 8 characters with at least one number
        </div>
        <!-- PasswordConfirm Input -->
        <div class="required field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="passwordConfirm" placeholder="Password Confirmation"
                   [formControl]="passwordForm.controls['passwordConfirm']">
          </div>
        </div>
        <div *ngIf="passwordConfirm.hasError('invalidPasswordConfirm')&&passwordConfirm.touched"
             class="ui error message"> Must match password.
        </div>
        <button class="ui right floated submit teal button"
                type="submit"
                [disabled]="!passwordForm.valid">Submit
        </button>

      </form>
    </div>
  </div>
</body>
